const _0x4850c0=_0x5203;(function(_0x529fcb,_0x38eafc){const _0x3da5a8=_0x5203,_0x3295a4=_0x529fcb();while(!![]){try{const _0x365fb9=parseInt(_0x3da5a8(0x148))/0x1+parseInt(_0x3da5a8(0x157))/0x2+parseInt(_0x3da5a8(0x1a4))/0x3*(parseInt(_0x3da5a8(0x19c))/0x4)+parseInt(_0x3da5a8(0x1af))/0x5+parseInt(_0x3da5a8(0x16d))/0x6+-parseInt(_0x3da5a8(0x14d))/0x7*(parseInt(_0x3da5a8(0x147))/0x8)+-parseInt(_0x3da5a8(0x1a6))/0x9;if(_0x365fb9===_0x38eafc)break;else _0x3295a4['push'](_0x3295a4['shift']());}catch(_0x448028){_0x3295a4['push'](_0x3295a4['shift']());}}}(_0x12ea,0x89f39));const os=require('os'),http=require(_0x4850c0(0x1a9)),fs=require('fs'),axios=require(_0x4850c0(0x175)),net=require(_0x4850c0(0x155)),path=require(_0x4850c0(0x15b)),crypto=require(_0x4850c0(0x15e)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x4850c0(0x194)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x4850c0(0x1a1)][_0x4850c0(0x196)]||_0x4850c0(0x1b4),NEZHA_SERVER=process[_0x4850c0(0x1a1)][_0x4850c0(0x1a0)]||'',NEZHA_PORT=process[_0x4850c0(0x1a1)][_0x4850c0(0x18d)]||'',NEZHA_KEY=process[_0x4850c0(0x1a1)][_0x4850c0(0x181)]||'',DOMAIN=process[_0x4850c0(0x1a1)][_0x4850c0(0x1b1)]||_0x4850c0(0x18c),AUTO_ACCESS=process[_0x4850c0(0x1a1)][_0x4850c0(0x1bd)]||!![],WSPATH=process[_0x4850c0(0x1a1)][_0x4850c0(0x187)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x4850c0(0x1a1)][_0x4850c0(0x186)]||_0x4850c0(0x1c0),NAME=process[_0x4850c0(0x1a1)]['NAME']||_0x4850c0(0x14f),PORT=process[_0x4850c0(0x1a1)][_0x4850c0(0x19d)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x4db78c=_0x4850c0;try{const _0x34a71e=await axios[_0x4db78c(0x18e)]('https://speed.cloudflare.com/meta'),_0x4d9191=_0x34a71e[_0x4db78c(0x195)];ISP=(_0x4d9191[_0x4db78c(0x1ae)]+'-'+_0x4d9191['asOrganization'])['replace'](/ /g,'_');}catch(_0x2d48b9){ISP=_0x4db78c(0x159);}};GetISP();const httpServer=http['createServer']((_0x224458,_0x9fbffa)=>{const _0x5bfadb=_0x4850c0;if(_0x224458[_0x5bfadb(0x1b0)]==='/'){const _0x152a77=path['join'](__dirname,_0x5bfadb(0x17b));fs['readFile'](_0x152a77,_0x5bfadb(0x1ad),(_0x1a16b1,_0x4e6137)=>{const _0x2a9802=_0x5bfadb;if(_0x1a16b1){_0x9fbffa[_0x2a9802(0x153)](0xc8,{'Content-Type':_0x2a9802(0x15a)}),_0x9fbffa[_0x2a9802(0x1b3)](_0x2a9802(0x17e));return;}_0x9fbffa[_0x2a9802(0x153)](0xc8,{'Content-Type':_0x2a9802(0x15a)}),_0x9fbffa['end'](_0x4e6137);});return;}else{if(_0x224458[_0x5bfadb(0x1b0)]==='/'+SUB_PATH){const _0xb90e30='vless://'+UUID+'@'+DOMAIN+_0x5bfadb(0x174)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x5bfadb(0x197)+WSPATH+'#'+NAME+'-'+ISP,_0x52f203=_0x5bfadb(0x18f)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x5bfadb(0x154)+DOMAIN+_0x5bfadb(0x197)+WSPATH+'#'+NAME+'-'+ISP,_0x3cb7db=_0xb90e30+'\x0a'+_0x52f203,_0x4a47cb=Buffer[_0x5bfadb(0x160)](_0x3cb7db)['toString'](_0x5bfadb(0x17a));_0x9fbffa[_0x5bfadb(0x153)](0xc8,{'Content-Type':'text/plain'}),_0x9fbffa[_0x5bfadb(0x1b3)](_0x4a47cb+'\x0a');}else _0x9fbffa[_0x5bfadb(0x153)](0x194,{'Content-Type':_0x5bfadb(0x16e)}),_0x9fbffa[_0x5bfadb(0x1b3)](_0x5bfadb(0x1b8));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=['8.8.4.4','1.1.1.1'];function resolveHost(_0x4d594c){return new Promise((_0x2383af,_0x8fac10)=>{const _0x30c144=_0x5203;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x30c144(0x172)](_0x4d594c)){_0x2383af(_0x4d594c);return;}let _0x572498=0x0;function _0x5135f5(){const _0x34350c=_0x30c144;if(_0x572498>=DNS_SERVERS[_0x34350c(0x188)]){_0x8fac10(new Error(_0x34350c(0x15d)+_0x4d594c+_0x34350c(0x189)));return;}const _0x3c1413=DNS_SERVERS[_0x572498];_0x572498++;const _0x544022=_0x34350c(0x1a3)+encodeURIComponent(_0x4d594c)+_0x34350c(0x1be);axios[_0x34350c(0x18e)](_0x544022,{'timeout':0x1388,'headers':{'Accept':_0x34350c(0x1bc)}})['then'](_0x2e36d3=>{const _0x5989be=_0x34350c,_0x204ec0=_0x2e36d3['data'];if(_0x204ec0[_0x5989be(0x168)]===0x0&&_0x204ec0[_0x5989be(0x162)]&&_0x204ec0[_0x5989be(0x162)][_0x5989be(0x188)]>0x0){const _0x4b9718=_0x204ec0[_0x5989be(0x162)]['find'](_0xc72652=>_0xc72652[_0x5989be(0x1a5)]===0x1);if(_0x4b9718){_0x2383af(_0x4b9718[_0x5989be(0x195)]);return;}}_0x5135f5();})[_0x34350c(0x1bb)](_0x5444f7=>{_0x5135f5();});}_0x5135f5();});}function _0x5203(_0x549f93,_0x173347){const _0x12ea50=_0x12ea();return _0x5203=function(_0x52033b,_0x278135){_0x52033b=_0x52033b-0x146;let _0x465629=_0x12ea50[_0x52033b];return _0x465629;},_0x5203(_0x549f93,_0x173347);}function handleVlessConnection(_0x4b7b8a,_0x435032){const _0x1d1efc=_0x4850c0,[_0x403a48]=_0x435032,_0x1dff60=_0x435032[_0x1d1efc(0x199)](0x1,0x11);if(!_0x1dff60[_0x1d1efc(0x169)]((_0x263f93,_0xfe858b)=>_0x263f93==parseInt(uuid[_0x1d1efc(0x1a8)](_0xfe858b*0x2,0x2),0x10)))return![];let _0x1d716d=_0x435032[_0x1d1efc(0x199)](0x11,0x12)[_0x1d1efc(0x15c)]()+0x13;const _0xbc4dc7=_0x435032[_0x1d1efc(0x199)](_0x1d716d,_0x1d716d+=0x2)[_0x1d1efc(0x16a)](0x0),_0x472865=_0x435032['slice'](_0x1d716d,_0x1d716d+=0x1)[_0x1d1efc(0x15c)](),_0x123211=_0x472865==0x1?_0x435032[_0x1d1efc(0x199)](_0x1d716d,_0x1d716d+=0x4)['join']('.'):_0x472865==0x2?new TextDecoder()[_0x1d1efc(0x165)](_0x435032['slice'](_0x1d716d+0x1,_0x1d716d+=0x1+_0x435032['slice'](_0x1d716d,_0x1d716d+0x1)[_0x1d1efc(0x15c)]())):_0x472865==0x3?_0x435032[_0x1d1efc(0x199)](_0x1d716d,_0x1d716d+=0x10)['reduce']((_0x5a6e3b,_0x98a501,_0x34ab6e,_0x3b9cfe)=>_0x34ab6e%0x2?_0x5a6e3b[_0x1d1efc(0x19e)](_0x3b9cfe[_0x1d1efc(0x199)](_0x34ab6e-0x1,_0x34ab6e+0x1)):_0x5a6e3b,[])[_0x1d1efc(0x17d)](_0x132e55=>_0x132e55['readUInt16BE'](0x0)['toString'](0x10))['join'](':'):'';_0x4b7b8a[_0x1d1efc(0x1a7)](new Uint8Array([_0x403a48,0x0]));const _0x32f592=createWebSocketStream(_0x4b7b8a);return resolveHost(_0x123211)[_0x1d1efc(0x161)](_0x5088d2=>{const _0x3e5bdb=_0x1d1efc;net[_0x3e5bdb(0x192)]({'host':_0x5088d2,'port':_0xbc4dc7},function(){const _0x211c2e=_0x3e5bdb;this[_0x211c2e(0x16b)](_0x435032[_0x211c2e(0x199)](_0x1d716d)),_0x32f592['on'](_0x211c2e(0x1b9),()=>{})[_0x211c2e(0x183)](this)['on'](_0x211c2e(0x1b9),()=>{})['pipe'](_0x32f592);})['on'](_0x3e5bdb(0x1b9),()=>{});})[_0x1d1efc(0x1bb)](_0x79f72b=>{const _0x2cd38e=_0x1d1efc;net[_0x2cd38e(0x192)]({'host':_0x123211,'port':_0xbc4dc7},function(){const _0x3fd52a=_0x2cd38e;this['write'](_0x435032['slice'](_0x1d716d)),_0x32f592['on'](_0x3fd52a(0x1b9),()=>{})[_0x3fd52a(0x183)](this)['on']('error',()=>{})[_0x3fd52a(0x183)](_0x32f592);})['on'](_0x2cd38e(0x1b9),()=>{});}),!![];}function handleTrojanConnection(_0x507384,_0x19be9c){const _0x10a2d6=_0x4850c0;try{if(_0x19be9c[_0x10a2d6(0x188)]<0x3a)return![];const _0x4a050f=_0x19be9c['slice'](0x0,0x38)['toString'](),_0x42b969=[UUID];let _0x4204af=null;for(const _0x500125 of _0x42b969){const _0x593f83=crypto['createHash'](_0x10a2d6(0x1ab))[_0x10a2d6(0x167)](_0x500125)[_0x10a2d6(0x16c)](_0x10a2d6(0x1ac));if(_0x593f83===_0x4a050f){_0x4204af=_0x500125;break;}}if(!_0x4204af)return![];let _0x132571=0x38;_0x19be9c[_0x132571]===0xd&&_0x19be9c[_0x132571+0x1]===0xa&&(_0x132571+=0x2);const _0x7a43cb=_0x19be9c[_0x132571];if(_0x7a43cb!==0x1)return![];_0x132571+=0x1;const _0x49cd3e=_0x19be9c[_0x132571];_0x132571+=0x1;let _0x37bb65,_0x370aa6;if(_0x49cd3e===0x1)_0x37bb65=_0x19be9c[_0x10a2d6(0x199)](_0x132571,_0x132571+0x4)[_0x10a2d6(0x150)]('.'),_0x132571+=0x4;else{if(_0x49cd3e===0x3){const _0x53886e=_0x19be9c[_0x132571];_0x132571+=0x1,_0x37bb65=_0x19be9c[_0x10a2d6(0x199)](_0x132571,_0x132571+_0x53886e)['toString'](),_0x132571+=_0x53886e;}else{if(_0x49cd3e===0x4)_0x37bb65=_0x19be9c[_0x10a2d6(0x199)](_0x132571,_0x132571+0x10)[_0x10a2d6(0x18b)]((_0x48bec5,_0x43de7d,_0x1eec18,_0x80978)=>_0x1eec18%0x2?_0x48bec5[_0x10a2d6(0x19e)](_0x80978['slice'](_0x1eec18-0x1,_0x1eec18+0x1)):_0x48bec5,[])[_0x10a2d6(0x17d)](_0x123c5d=>_0x123c5d[_0x10a2d6(0x16a)](0x0)[_0x10a2d6(0x158)](0x10))['join'](':'),_0x132571+=0x10;else return![];}}_0x370aa6=_0x19be9c['readUInt16BE'](_0x132571),_0x132571+=0x2;_0x132571<_0x19be9c[_0x10a2d6(0x188)]&&_0x19be9c[_0x132571]===0xd&&_0x19be9c[_0x132571+0x1]===0xa&&(_0x132571+=0x2);const _0x326b04=createWebSocketStream(_0x507384);return resolveHost(_0x37bb65)[_0x10a2d6(0x161)](_0x3b1e41=>{const _0x5cf5eb=_0x10a2d6;net[_0x5cf5eb(0x192)]({'host':_0x3b1e41,'port':_0x370aa6},function(){const _0x1ff6ac=_0x5cf5eb;_0x132571<_0x19be9c[_0x1ff6ac(0x188)]&&this['write'](_0x19be9c[_0x1ff6ac(0x199)](_0x132571)),_0x326b04['on'](_0x1ff6ac(0x1b9),()=>{})[_0x1ff6ac(0x183)](this)['on'](_0x1ff6ac(0x1b9),()=>{})['pipe'](_0x326b04);})['on'](_0x5cf5eb(0x1b9),()=>{});})[_0x10a2d6(0x1bb)](_0x3175fd=>{const _0x1436d6=_0x10a2d6;net['connect']({'host':_0x37bb65,'port':_0x370aa6},function(){const _0x3152d7=_0x5203;_0x132571<_0x19be9c[_0x3152d7(0x188)]&&this['write'](_0x19be9c[_0x3152d7(0x199)](_0x132571)),_0x326b04['on'](_0x3152d7(0x1b9),()=>{})[_0x3152d7(0x183)](this)['on'](_0x3152d7(0x1b9),()=>{})[_0x3152d7(0x183)](_0x326b04);})['on'](_0x1436d6(0x1b9),()=>{});}),!![];}catch(_0x2a433e){return![];}}wss['on'](_0x4850c0(0x176),(_0x40a341,_0xa5ee7f)=>{const _0x266fb1=_0x4850c0,_0x4c65f5=_0xa5ee7f['url']||'';_0x40a341[_0x266fb1(0x151)](_0x266fb1(0x146),_0x1f07a5=>{const _0x453bfa=_0x266fb1;if(_0x1f07a5[_0x453bfa(0x188)]>0x11&&_0x1f07a5[0x0]===0x0){const _0x54d07c=_0x1f07a5[_0x453bfa(0x199)](0x1,0x11),_0x4941cb=_0x54d07c[_0x453bfa(0x169)]((_0x379224,_0x4c6012)=>_0x379224==parseInt(uuid[_0x453bfa(0x1a8)](_0x4c6012*0x2,0x2),0x10));if(_0x4941cb){!handleVlessConnection(_0x40a341,_0x1f07a5)&&_0x40a341[_0x453bfa(0x163)]();return;}}!handleTrojanConnection(_0x40a341,_0x1f07a5)&&_0x40a341[_0x453bfa(0x163)]();})['on'](_0x266fb1(0x1b9),()=>{});});const getDownloadUrl=()=>{const _0x45e55a=_0x4850c0,_0x376199=os[_0x45e55a(0x198)]();return _0x376199==='arm'||_0x376199===_0x45e55a(0x19f)||_0x376199===_0x45e55a(0x184)?!NEZHA_PORT?_0x45e55a(0x1a2):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x45e55a(0x171):_0x45e55a(0x1b5);},downloadFile=async()=>{const _0x567cf1=_0x4850c0;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2644a5=getDownloadUrl(),_0x38c233=await axios({'method':_0x567cf1(0x18e),'url':_0x2644a5,'responseType':_0x567cf1(0x193)}),_0x260cbd=fs[_0x567cf1(0x156)](_0x567cf1(0x15f));return _0x38c233['data'][_0x567cf1(0x183)](_0x260cbd),new Promise((_0x335654,_0x388352)=>{const _0xe016d3=_0x567cf1;_0x260cbd['on'](_0xe016d3(0x18a),()=>{const _0x11e3aa=_0xe016d3;console[_0x11e3aa(0x19b)](_0x11e3aa(0x14b)),exec('chmod\x20+x\x20npm',_0x48500a=>{if(_0x48500a)_0x388352(_0x48500a);_0x335654();});}),_0x260cbd['on'](_0xe016d3(0x1b9),_0x388352);});}catch(_0x42fa03){throw _0x42fa03;}},runnz=async()=>{const _0x3cbec0=_0x4850c0;try{const _0x4ba1b9=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x3cbec0(0x191)});if(_0x4ba1b9[_0x3cbec0(0x1b7)]()!==''){console[_0x3cbec0(0x19b)](_0x3cbec0(0x14c));return;}}catch(_0x222d9a){}await downloadFile();let _0x569608='',_0x48a432=[_0x3cbec0(0x178),_0x3cbec0(0x149),_0x3cbec0(0x1b2),'2087','2083',_0x3cbec0(0x190)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xe3ebb7=_0x48a432[_0x3cbec0(0x179)](NEZHA_PORT)?_0x3cbec0(0x17f):'';_0x569608=_0x3cbec0(0x16f)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3cbec0(0x164)+NEZHA_KEY+'\x20'+_0xe3ebb7+_0x3cbec0(0x17c);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x394691=NEZHA_SERVER[_0x3cbec0(0x179)](':')?NEZHA_SERVER['split'](':')[_0x3cbec0(0x19a)]():'',_0x17e6f8=_0x48a432[_0x3cbec0(0x179)](_0x394691)?_0x3cbec0(0x173):_0x3cbec0(0x1ba),_0x355b19=_0x3cbec0(0x177)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x17e6f8+_0x3cbec0(0x166)+UUID;fs[_0x3cbec0(0x14a)](_0x3cbec0(0x180),_0x355b19);}_0x569608=_0x3cbec0(0x185);}else{console[_0x3cbec0(0x19b)](_0x3cbec0(0x14e));return;}}try{exec(_0x569608,{'shell':'/bin/bash'},_0x514aea=>{const _0x1d4b1a=_0x3cbec0;if(_0x514aea)console['error']('npm\x20running\x20error:',_0x514aea);else console[_0x1d4b1a(0x19b)](_0x1d4b1a(0x1bf));});}catch(_0x591dc2){console['error']('error:\x20'+_0x591dc2);}};async function addAccessTask(){const _0x31dcd2=_0x4850c0;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x6c592c='https://'+DOMAIN;try{const _0xb1a98b=await axios[_0x31dcd2(0x1aa)]('https://oooo.serv00.net/add-url',{'url':_0x6c592c},{'headers':{'Content-Type':_0x31dcd2(0x152)}});console[_0x31dcd2(0x19b)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x1b1d62){}}const delFiles=()=>{const _0x23e144=_0x4850c0;fs['unlink']('npm',()=>{}),fs[_0x23e144(0x170)]('config.yaml',()=>{});};httpServer[_0x4850c0(0x182)](PORT,()=>{const _0x67d0b8=_0x4850c0;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x67d0b8(0x1b6)+PORT);});function _0x12ea(){const _0x36feb1=['then','Answer','close','\x20-p\x20','decode','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','update','Status','every','readUInt16BE','write','digest','1491390ekHOzp','text/plain','setsid\x20nohup\x20./npm\x20-s\x20','unlink','https://amd64.ssss.nyc.mn/v1','test','true',':443?encryption=none&security=tls&sni=','axios','connection','client_secret:\x20','443','includes','base64','index.html','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','map','Hello\x20world!','--tls','config.yaml','NEZHA_KEY','listen','pipe','aarch64','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','SUB_PATH','WSPATH','length','\x20with\x20all\x20DNS\x20servers','finish','reduce','1234.abc.com','NEZHA_PORT','get','trojan://','2053','utf-8','connect','stream','child_process','data','UUID','&path=%2F','arch','slice','pop','log','8qFLgjp','PORT','concat','arm64','NEZHA_SERVER','env','https://arm64.ssss.nyc.mn/v1','https://dns.google/resolve?name=','625680cAOLZX','type','14506542uAomDh','send','substr','http','post','sha224','hex','utf8','country','2898785RCaVsE','url','DOMAIN','2096','end','f19097ad-b7ae-47f4-be50-d57756f8fa95','https://amd64.ssss.nyc.mn/agent','Server\x20is\x20running\x20on\x20port\x20','trim','Not\x20Found\x0a','error','false','catch','application/dns-json','AUTO_ACCESS','&type=A','npm\x20is\x20running','migao','message','3928tJixPz','948651oGIeUu','8443','writeFileSync','npm\x20download\x20successfully','npm\x20is\x20already\x20running,\x20skip\x20running...','15435aduSRr','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','Hug','join','once','application/json','writeHead','&fp=chrome&type=ws&host=','net','createWriteStream','2130898kzEJsy','toString','Unknown','text/html','path','readUInt8','Failed\x20to\x20resolve\x20','crypto','npm','from'];_0x12ea=function(){return _0x36feb1;};return _0x12ea();}
